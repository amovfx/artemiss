

<link rel="stylesheet" href="../static/css/comment.css">{% import "bootstrap/wtf.html" as wtf %}
<div id="comment-thread" class="comment-thread">
    <div id="infinite-scroller"></div>
    <div class="d-flex justify-content-center mb-3" id="sentinel">
        <div class="spinner-boarder" role="status"></div>
    </div>

</div>


<template id="comment_template">
    <div class="comment-start">
    <details open class="comment" id="comment" data-path="None" data-parent="None">
        <summary>
            <div class="comment-heading">
                <div class="comment-voting">
                    <button type="button">
                        <span aria-hidden="true">&#9650;</span>
                        <span class="sr-only">Vote up</span>
                    </button>
                    <button type="button">
                        <span aria-hidden="true">&#9660;</span>
                        <span class="sr-only">Vote down</span>
                    </button>
                </div>
                <div class="comment-info">
                    <!-- Set author in js -->
                    <a href="#" class="comment-author" id="comment-author"></a>
                    <p class="m-0" id="comment-datetime">
                    </p>
                </div>
            </div>
        </summary>

            <div class="comment-body">
                <!-- Set message in js -->
                <p id="comment-message"></p>
                <!-- Set callback functions in js -->
                <button id="reply-button" type="button">Reply</button>
                <button id="flag-button" type="button">Flag</button>

                <!-- Reply form start -->
                <div >
                    <form class="reply-form" id="reply-form" action="" data-reply_form_id="replace_by_js" method="post" style="display: none;">
                        {{ form.hidden_tag() }}
                        {{ wtf.form_errors(form) }}

                        {{ wtf.form_field(form.message) }}
                        {{ wtf.form_field(form.submit) }}
                        {{ wtf.form_field(form.cancel) }}
                    </form>
                </div>
                <!-- Reply form end -->
            </div>
            <div class="replies" id="replies" data-reply_parent="" position="relative" >

            </div>

    </details>
     </div>
</template>

<script src="{{ url_for('comments.static', filename='js/load_comments.js') }}"></script>
<script>

    let endpoint = "{{ url_for('comments.get_tribe_comments', tribe_uuid=tribe.uuid) }}"
    var infinite_loader = new InfiniteLoader(endpoint, CommentTemplate)

    //observe default value, and element that has an id of "sentinel"
    infinite_loader.observe();

</script>
